Mathematical Model Formulation:  
  To enhance the applicability of the AMR scheduling model in warehouse environments, we 
incorporate three key features into the optimization framework: 
(i) a multiâ€‘robot path conflict avoidance mechanism, 
(ii) a partial charging strategy, and 
(iii) a dynamic task scheduling mechanism based on scenarioâ€‘dependent demand. 
The resulting mixedâ€‘integer model, including indices, parameters, decision variables, objective 
function, and constraints, is summarized below.  
1. Model Symbol Definition:  
a) Indexes:  
i. A: The set of AMRs, ğ‘ âˆˆ ğ´ indexes an AMR. 
ii. P: The set of pickup nodes 
iii. D: The set of delivery nodes 
iv. R: The set of requests, each request ğ‘Ÿ âˆˆ ğ‘… is associated with one pickup node ğ‘–(ğ‘Ÿ)âˆˆ
ğ· and one delivery node ğ‘—(ğ‘Ÿ)âˆˆ ğ‘ƒ 
v. C: The set of charging station nodes 
vi. N: The set of all nodes, including pickup nodes, delivery nodes, charging station nodes, 
and AMR depots 
vii. E: The set of directed edges (ğ‘–, ğ‘—) over N.  
viii. W: Set of scenarios modelling demand uncertainty and dynamic task occurrences, 
indexed by ğœ” 
ix. ğ¸ğ‘‘ğ‘’ğ‘: Set of decision epochs at which the scheduler makes a dispatching decision (e.g., 
an AMR becomes idle or a new task arrives). 
x. ğ»: Set of scheduling rules (dispatching/charging rules) available to the ruleâ€‘selection 
layer. 
 
b) Parameter:  
i. ğ¹ğ‘: Fixed costs (e.g., purchase/maintenance cost) for AMR a.  
ii. ğ‘‘(ğ‘–,ğ‘—): The traveling distance from node i to node j. 
iii. ğ‘ğ‘‘ğ‘–ğ‘ ğ‘¡: Travel cost per unit distance. 
iv. ğ‘ğ‘â„: Charging cost per unit energy. 
v. ğ‘ğ‘¡ğ‘ğ‘Ÿ: Unit tardiness per unit time. ğ‘ğ‘¡ğ‘ğ‘Ÿ > ğ‘ğ‘‘ğ‘–ğ‘ ğ‘¡ 
vi. ğœ(ğ‘–,ğ‘—): AMRâ€™s baseline travel time on edge (i, j) without waiting or conflicts.  
vii. ğ‘ ğ‘–: Service time at node i. 
viii. ğ¸ğ‘–
âˆ’, ğ¸ğ‘–
+: earliest and latest start times (time window) of service at node i. 
ix. ğ‘„ğ‘: The maximum load capacity of AMR a.  
x. ğµğ‘šğ‘ğ‘¥ğ‘ : The maximum battery capacity of AMR a.  
xi. ğµ0
ğ‘: The initial battery value of AMR a.  
xii. ğœŒ: Energy consumption rate per unit travel time.  
xiii. M: sufficiently large positive constant.  
xiv. ğ‘ğ‘–
ğœ”: The demand of pickup node i under scenario ğœ”. For tasks that do not appear, their 
demand can be set to 0 in the scenario ğœ”.  
xv. âˆ†ğ‘¡ğ‘ ğ‘ğ‘“ğ‘’: minimum safety headway between two AMRs on the same edge or at the same 
node (if path conflicts are explicitly modelled).  
xvi. ğ‘ğœ”: Probability of scenario ğœ”. 
xvii. ğ›¼1, ğ›¼2, ğ›¼3, ğ›¼4, ğ›¼5, ğ›¼6, ğ›¼7: Weighting parameters (penalty coefficients) in the objective 
function, corresponding to: (ğ›¼6 â‰« ğ›¼7 â‰« ğ›¼3 â‰« {ğ›¼1, ğ›¼2, ğ›¼4, ğ›¼5}) 
(a) ğ›¼1: Weight for the fixed fleet cost (priority of minimizing fleet size). 
(b) ğ›¼2: Weight for the variable travel cost (priority of minimizing distance traveled). 
(c) ğ›¼3: Weight for the tardiness penalty (priority of service punctuality). 
(d) ğ›¼4: Weight for the energy cost (priority of energy efficiency). 
(e) ğ›¼5 : Weight for conflict -avoidance waiting time (priority of minimizing traffic 
congestion delays). 
(f) ğ›¼6: Weight for task rejection (Highest priority soft constraint to maximize service 
level). 
(g) ğ›¼7: Weight for the location-dependent waiting cost (controls dwelling behavior to 
prevent resource hogging). 
xviii. ğœ…: Charge rate (in energy units/s) 
xix. ğœ‚: Charging efficiency 
xx. ğ‘‡ğ‘šğ‘ğ‘¥ğ‘â„ : Maximum charging time per visit to a charging station. 
xxi. ğ¸ğ‘šğ‘ğ‘¥ğ‘â„ : Maximum charge amount per visit. 
xxii. ğ‘œğ‘: Origin depot of AMR a. 
xxiii. ğ‘¢ğ‘: Destination depot of AMR a.  
xxiv. ğœ‘ğ‘–
ğ‘¤ğ‘ğ‘–ğ‘¡: The location-dependent base cost for waiting at node i. To prevent charging 
station hogging, this parameter is set to a significantly higher value  when ğ‘– âˆˆ ğ¶ 
(charging stations) compared to when i is a depot or a pickup/delivery node.  
 
c) Decision variables:  
i. ğ‘¥(ğ‘–,ğ‘—)
ğ‘,ğœ” ğœ–{0,1}: A binary variable indicating whether AMR a travels path (ğ‘–, ğ‘—). ğ‘¥(ğ‘–,ğ‘—)
ğ‘ =
1 means that AMR a traverses edge (ğ‘–, ğ‘—) under scenario ğœ”, otherwise ğ‘¥(ğ‘–,ğ‘—)
ğ‘ = 0. 
ii. ğ‘¦ğ‘–
ğ‘,ğœ” âˆˆ {0,1}: Whether AMR a is charging in station ğ‘– âˆˆ ğ¶ or not under scenario ğœ”. 
iii. ğ‘š(ğ‘–,ğ‘—)
ğ‘ğ‘,ğœ” âˆˆ {0,1}: Precedence variable on edge ( ğ‘–,ğ‘—) indicating whether AMR ğ‘ passes 
before ğ‘. 
iv. ğ‘›(ğ‘–,ğ‘—)
ğ‘ğ‘,ğœ” âˆˆ {0,1}: Precedence variable at node k.  
v. ğ‘¡(ğ‘–,ğ‘—)
ğ‘ğ‘,ğœ” â‰¥ 0: Waiting time of AMR b due to avoiding a on edge (ğ‘–, ğ‘—). 
vi. ğ‘§ğ‘Ÿğœ” âˆˆ {0,1} : Task acceptance decision  under scenario ğœ”  (ğ‘§ğ‘Ÿğœ” = 1  if request r is 
served, ğ‘§ğ‘Ÿğœ” = 0 if it is rejected). 
vii. ğ‘‡ğ‘–
ğ‘,ğœ” â‰¥ 0: Service start time of AMR a at node i in scenario ğœ”. 
viii. ğ¹ğ‘–
ğ‘,ğœ” â‰¥ 0: Departure time of AMR a at node i in scenario ğœ”.  
ix. ğ¿ğ‘–
ğ‘,ğœ” â‰¥ 0: Tardiness at node i (time by which ğ‘‡ğ‘–
ğ‘,ğœ” exceeds ğ¸ğ‘–
+). 
x. ğ‘ğ‘–
ğ‘,ğœ” â‰¥ 0: Charged energy of AMR a at node i in scenario ğœ”. 
xi. ğœğ‘–
ğ‘,ğœ” â‰¥ 0: Charging time of AMR a at node i in scenario ğœ”. 
xii. âˆ†ğ‘‡ğ‘–,ğ‘—
ğ‘,ğœ” â‰¥ 0: Actual travel time of AMR a on edge (ğ‘–, ğ‘—) in scenario ğœ”.  
xiii. ğµğ‘ğ‘Ÿğ‘Ÿ,ğ‘–
ğ‘,ğœ” â‰¥ 0: Battery level of AMR ğ‘ upon arrival at node i in scenario ğœ”. 
xiv. ğµğ‘‘ğ‘’ğ‘,ğ‘–
ğ‘,ğœ” â‰¥ 0: Battery level of AMR a upon departure from node i in scenario ğœ”. 
xv. ğ‘™ğ‘–
ğ‘,ğœ” â‰¥ 0: Load on AMR a when leaving node i in scenario ğœ”. 
xvi. ğ‘¢ğ‘–
ğ‘,ğœ” â‰¥ 0: Generic waiting time of AMR a at node i (e.g., early arrival waiting).  
xvii. ğœ‹ğ‘’,â„ âˆˆ (0,1): rule-selection variable; ğœ‹ğ‘’,â„ = 1 if scheduling rule â„ âˆˆ ğ» is selected 
at decision epoch ğ‘’ âˆˆ ğ¸ğ‘‘ğ‘’ğ‘, and 0 otherwise. 
  Later in the algorithm part, the RL policy will output probabilities over ğœ‹ğ‘’. Here we keep ğœ‹ as a 
structural variable to formalize the rule-selection decision.  
d) Objective Function:  
We minimize the expected total cost over all demand/scenario realizations, combining fleet fixed 
cost, distanceâ€‘based travel cost, energyâ€‘based charging cost, tardiness, conflictâ€‘avoidance waiting, 
predictionâ€‘driven standby and task rejection:  
min ğ‘‡ğ¶ = âˆ‘ ğ‘ğœ”
ğœ”âˆˆğ‘Š
(ğ›¼1 âˆ‘ ğ¹ğ‘
ğ‘âˆˆğ´
 (ğ¹ğ‘–ğ‘¥ğ‘’ğ‘‘)+ ğ›¼2 âˆ‘ âˆ‘ ğ‘ğ‘‘ğ‘–ğ‘ ğ‘¡ âˆ™ ğ‘‘(ğ‘–,ğ‘—)âˆ™ ğ‘¥(ğ‘–,ğ‘—)
ğ‘,ğœ”
(ğ‘–,ğ‘—)âˆˆğ¸ğ‘âˆˆğ´
(ğ‘‡ğ‘Ÿğ‘ğ‘£ğ‘’ğ‘™ ğ‘ğ‘œğ‘ ğ‘¡)
+ ğ›¼3 âˆ‘ âˆ‘ ğ‘ğ‘¡ğ‘ğ‘Ÿ âˆ™ ğ¿ğ‘–
ğ‘,ğœ”
ğ‘–âˆˆğ‘ğ‘âˆˆğ´
(ğ‘‡ğ‘ğ‘Ÿğ‘‘ğ‘–ğ‘›ğ‘’ğ‘ ğ‘  ğ‘ğ‘’ğ‘›ğ‘ğ‘™ğ‘¡ğ‘¦)+ ğ›¼4 âˆ‘ âˆ‘ ğ‘ğ‘â„ âˆ™ ğ‘ğ‘–
ğ‘,ğœ”
ğ‘–âˆˆğ¶ğ‘âˆˆğ´
(ğ¸ğ‘›ğ‘’ğ‘Ÿğ‘”ğ‘¦ ğ‘ğ‘œğ‘ ğ‘¡)
+ ğ›¼5 âˆ‘ âˆ‘ ğ‘¡(ğ‘–,ğ‘—)
ğ‘ğ‘,ğœ”
(ğ‘–,ğ‘—)âˆˆğ¸ğ‘,ğ‘âˆˆğ´
(ğ¶ğ‘œğ‘›ğ‘“ğ‘™ğ‘–ğ‘ğ‘¡ ğ‘¤ğ‘ğ‘–ğ‘¡)+ ğ›¼6 âˆ‘(1 âˆ’ ğ‘§ğ‘Ÿğœ”)
ğ‘Ÿğœ–ğ‘…
(ğ‘…ğ‘’ğ‘—ğ‘’ğ‘ğ‘¡ğ‘–ğ‘œğ‘› ğ‘ğ‘’ğ‘›ğ‘ğ‘™ğ‘¡ğ‘¦)
+ ğ›¼7 âˆ‘ âˆ‘ ğœ‘ğ‘–
ğ‘¤ğ‘ğ‘–ğ‘¡ âˆ™ ğ‘¢ğ‘–
ğ‘,ğœ”
ğ‘–ğœ–ğ‘ğ‘âˆˆğ´
(ğ¿ğ‘œğ‘ğ‘ğ‘¡ğ‘–ğ‘œğ‘›âˆ’ ğ‘‘ğ‘’ğ‘ğ‘’ğ‘›ğ‘‘ğ‘’ğ‘›ğ‘¡ ğ‘¤ğ‘ğ‘–ğ‘¡ğ‘–ğ‘›ğ‘” ğ‘ğ‘œğ‘ ğ‘¡)) 
 
e) Constraints 
  The model's constraints are defined as follows: task execution constraints, time constraints, energy 
and charging constraints, collision avoidance constraints, and constraints regarding dynamic tasks and 
uncertainties. Each of these constraints applies to every uncertainty scenario ğœ”  within the set W, 
thereby ensuring the scenarios remain feasible amid varying demand fluctuations and task occurrences.   
âˆ‘ âˆ‘ ğ‘¥(ğ‘–(ğ‘Ÿ),ğ‘—)
ğ‘,ğœ”
ğ‘—âˆˆğ‘ğ‘ğœ–ğ´
= ğ‘§ğ‘Ÿğœ”, âˆ‘ âˆ‘ ğ‘¥(ğ‘—(ğ‘Ÿ),ğ‘—)
ğ‘,ğœ”
ğ‘—âˆˆğ‘ğ‘ğœ–ğ´
= ğ‘§ğ‘Ÿğœ”, âˆ€ğ‘Ÿ âˆˆ ğ‘…, âˆ€ğœ” âˆˆ ğ‘Š (1) 
âˆ‘ ğ‘¥(ğ‘œğ‘,ğ‘—)
ğ‘,ğœ”
ğ‘—âˆˆğ‘
âˆ’ âˆ‘ ğ‘¥(ğ‘–,ğ‘¢ğ‘)
ğ‘,ğœ”
ğ‘–âˆˆğ‘
= 0, âˆ€ğ‘ âˆˆ ğ´, âˆ€ğœ” âˆˆ ğ‘Š (2) 
âˆ‘ ğ‘¥(ğ‘–,ğ‘—)
ğ‘,ğœ”
ğ‘—âˆˆğ‘
= âˆ‘ ğ‘¥(ğ‘—,ğ‘–)
ğ‘,ğœ”
ğ‘—âˆˆğ‘
= 1,   âˆ€ğ‘– âˆˆ ğ‘\{ğ‘œğ‘, ğ‘¢ğ‘}, âˆ€ğœ” âˆˆ ğ‘Š, âˆ€ğ‘ âˆˆ ğ´ (3) 
ğ¹ğ‘–
ğ‘,ğœ” = ğ‘‡ğ‘–
ğ‘,ğœ” + ğ‘ ğ‘– + ğœğ‘–
ğ‘,ğœ” + ğ‘…ğ‘–
ğ‘,ğœ” + ğ‘¢ğ‘–
ğ‘,ğœ”, âˆ€ğ‘ âˆˆ ğ´, âˆ€ğ‘– âˆˆ ğ‘, âˆ€ğœ” âˆˆ ğ‘Š (4) 
ğ‘‡ğ‘—(ğ‘Ÿ)
ğ‘,ğœ” â‰¥ ğ¹ğ‘,ğ‘–(ğ‘Ÿ)
ğ‘,ğœ” âˆ’ ğ‘€(1 âˆ’ âˆ‘ ğ‘¥(ğ‘–(ğ‘Ÿ),ğ‘—)
ğ‘,ğœ”
ğ‘—âˆˆğ‘
), âˆ€ğ‘Ÿ âˆˆ ğ‘…, âˆ€ğ‘ âˆˆ ğ´, âˆ€ğœ” âˆˆ ğ‘Š (5) 
ğ¸ğ‘–
âˆ’ â‰¤ ğ‘‡ğ‘–
ğ‘,ğœ” â‰¤ ğ¸ğ‘–
+ + ğ¿ğ‘–
ğ‘,ğœ”, âˆ€ğ‘– âˆˆ ğ‘, âˆ€ğ‘ âˆˆ ğ´, âˆ€ğœ” âˆˆ ğ‘Š (6) 
æ‰¹æ³¨ [è¯—èƒ¡1]: æœåŠ¡ä¸æ•ˆç‡ï¼Œè¿Ÿåˆ°æ‰£åˆ†ï¼Œç§»åŠ¨æ‰£èƒ½è€— 
æ‰¹æ³¨ [è¯—èƒ¡2]: æ‹’å•ï¼ŒåŠ¨æ€æƒ©ç½šï¼Œéšç€å¿™ç¢Œç¨‹åº¦çš„å˜åŒ–ï¼Œ
ä½†æ˜¯æ€»ä½“å¾ˆé«˜ã€‚ä¼˜å…ˆçº§ Level 2 
æ‰¹æ³¨ [è¯—èƒ¡3]: é˜²ç¢°æ’åœ¨ Constraints (4) å’Œ (5) çš„æ—¶é—´çª—
é€»è¾‘é‡Œã€‚æœ€ä¼˜å…ˆçº§ 
ğµğ‘‘ğ‘’ğ‘,ğ‘œğ‘
ğ‘,ğœ” = ğµ0
ğ‘, âˆ€ğ‘ âˆˆ ğ´, âˆ€ğœ” âˆˆ ğ‘Š (7) 
0 â‰¤ ğµğ‘ğ‘Ÿğ‘Ÿ,ğ‘–
ğ‘,ğœ” â‰¤ ğµğ‘šğ‘ğ‘¥ğ‘ , 0 â‰¤ ğµğ‘‘ğ‘’ğ‘,ğ‘–
ğ‘,ğœ” â‰¤ ğµğ‘šğ‘ğ‘¥ğ‘ , âˆ€ğ‘ âˆˆ ğ´, âˆ€ğ‘– âˆˆ ğ‘, âˆ€ğœ” âˆˆ ğ‘Š (8) 
ğµğ‘ğ‘Ÿğ‘Ÿ,ğ‘—
ğ‘,ğœ” â‰¤ ğµğ‘‘ğ‘’ğ‘,ğ‘–
ğ‘ âˆ’ ğœŒğœğ‘–,ğ‘— + ğ‘€(1 âˆ’ ğ‘¥(ğ‘–,ğ‘—)
ğ‘,ğœ” ), âˆ€ğ‘ âˆˆ ğ´, âˆ€(ğ‘–, ğ‘—)âˆˆ ğ¸, âˆ€ğœ” âˆˆ ğ‘Š (9) 
{
ğ‘ğ‘–
ğ‘,ğœ” â‰¤ ğ¸ğ‘šğ‘ğ‘¥ğ‘â„ ğ‘¦ğ‘–
ğ‘,ğœ”, ğœğ‘–
ğ‘,ğœ” â‰¤ ğ‘‡ğ‘šğ‘ğ‘¥ğ‘â„ ğ‘¦ğ‘–
ğ‘,ğœ”, âˆ€ğ‘ âˆˆ ğ´, âˆ€ğ‘– âˆˆ ğ¶, âˆ€ğœ” âˆˆ ğ‘Š
ğ‘ğ‘–
ğ‘,ğœ” = ğœ‚ğœ…ğœğ‘–
ğ‘,ğœ”, âˆ€ğ‘ âˆˆ ğ´, âˆ€ğ‘– âˆˆ ğ¶, âˆ€ğœ” âˆˆ ğ‘Š  (10) 
ğµğ‘‘ğ‘’ğ‘,ğœ”
ğ‘,ğœ” = ğµğ‘ğ‘Ÿğ‘Ÿ,ğœ”
ğ‘,ğœ” + ğ‘ğ‘–
ğ‘,ğœ”, âˆ€ğ‘ âˆˆ ğ´, âˆ€ğ‘– âˆˆ ğ‘, âˆ€ğœ” âˆˆ ğ‘Š (11) 
ğ‘™ğ‘—(ğ‘Ÿ)
ğ‘,ğœ” = ğ‘™ğ‘–(ğ‘Ÿ)
ğ‘,ğœ” + ğ‘ğ‘–(ğ‘Ÿ)
ğœ” , âˆ€ğ‘ğœ–ğ´, âˆ€ğ‘Ÿ âˆˆ ğ‘…, âˆ€ğœ” âˆˆ ğ‘Š ğ‘¤ğ‘–ğ‘¡â„ ğ‘¥ğ‘–(ğ‘Ÿ)ğ‘—(ğ‘Ÿ)
ğ‘,ğœ” = 1 (12) 
0 â‰¤ ğ‘™ğ‘–
ğ‘,ğœ” â‰¤ ğ‘„ğ‘, âˆ€ğ‘ âˆˆ ğ´, âˆ€ğ‘– âˆˆ ğ‘, âˆ€ğœ” âˆˆ ğ‘Š (13) 
ğ‘›ğ‘˜
ğ‘ğ‘,ğœ” + ğ‘›ğ‘˜
ğ‘ğ‘,ğœ” = 1, âˆ€ğ‘˜ğœ–ğ‘, ğœ”ğœ–ğ‘Š (15) 
ğ‘‡ğ‘˜
ğ‘,ğœ” â‰¥ ğ¹ğ‘˜
ğ‘,ğœ” + âˆ†ğ‘¡ğ‘ ğ‘ğ‘“ğ‘’ âˆ’ ğ‘€ âˆ™ (1 âˆ’ ğ‘›ğ‘˜
ğ‘ğ‘,ğœ”)âˆ’ ğ‘€ âˆ™ (2 âˆ’ âˆ‘ ğ‘¥(ğ‘˜,ğ‘—)
ğ‘,ğœ”
ğ‘—
âˆ’ âˆ‘ ğ‘¥(ğ‘˜,ğ‘—)
ğ‘,ğœ”
ğ‘—
) (16) 
ğ‘¥ğ‘–
ğ‘,ğœ”, ğ‘¦ğ‘–
ğ‘,ğœ”, ğ‘§ğ‘Ÿğœ”, ğœ‹ğ‘’,â„ âˆˆ (0,1), âˆ€ğ‘ âˆˆ ğ´, (ğ‘–, ğ‘—)âˆˆ ğ¸, ğ‘– âˆˆ ğ¶, ğ‘Ÿ âˆˆ ğ‘…, ğ‘’ âˆˆ ğ¸ğ‘‘ğ‘’ğ‘, â„ âˆˆ ğ», ğœ” âˆˆ ğ‘Š (17) 
ğ‘‡ğ‘–
ğ‘,ğœ”, ğ¹ğ‘–
ğ‘,ğœ”, ğ¿ğ‘–
ğ‘,ğœ”, ğ‘ğ‘–
ğ‘,ğœ”, ğœğ‘–
ğ‘,ğœ”, âˆ†ğ‘‡ğ‘–,ğ‘—
ğ‘,ğœ”, ğµğ‘ğ‘Ÿğ‘Ÿ,ğ‘–
ğ‘,ğœ” , ğµğ‘‘ğ‘’ğ‘,ğ‘–
ğ‘,ğœ” , ğ‘™ğ‘–
ğ‘,ğœ”, ğ‘¢ğ‘–
ğ‘,ğœ”, ğ‘…ğ‘–
ğ‘,ğœ” â‰¥ 0, (18) 
    Constraints (1) ensure that each accepted request is visited exactly once and that its pickup and 
delivery nodes are served by the same AMR. If a request is rejected, none of its associated nodes can 
be visited. Constraints (2)â€“(3) impose flow conservation for each AMR. Every AMR leaves its origin 
depot exactly once, returns to its destination depot exactly once, and satisfies flow balance at all 
intermediate nodes, so that each vehicle follows a single continuous and logically c onsistent route. 
Constraint (4) defines the time balance  at each node: the departure time equals the arrival time plus 
the service duration, the charging time, the predictionâ€‘driven standby time and any additional waiting 
at that node. Constraint (5) guarantees the temporal precedence between pickup and delivery for the 
same request and AMR. The service at the delivery node cannot start before the corresponding pickup 
operation has been completed. Constraint (6) enforces the timeâ€‘window requirements. Service at each 
node must begin within its admissible time win dow; any violation of the latest start time is captured 
by the tardiness variable and penalized in the objective. Constraint (7) specifies the initial battery level 
of each AMR at its origin depot, providing the starting condition for the energy balance along the route. 
Constraints (8)â€“(11) jointly describe the battery dynamics and the partial charging mechanism. They 
link the arrival and departure battery levels on each arc to the energy consumed during travel  and 
restrict charging to only visited charging stations. The charged amount and charging time at each 
station are bounded and coupled through the charging rate and efficiency, so that AMRs can perform 
partial recharges and only replenish enough energy to complete the current and subseq uent task set. 
Constraints (12)â€“(13) govern the evolution of the carried load along each route and impose vehicle 
capacity limits. The load is increased at pickup nodes and decreased at delivery nodes of accepted 
æ‰¹æ³¨ [è¯—èƒ¡4]: ç”µé‡çº¦æŸåœ¨ Constraints (8)-(9) ä¸­ï¼Œç¡¬çº¦
æŸæ”¾åœ¨äº†çº¦æŸä¸­ã€‚æœ€ä¼˜å…ˆçº§ 
requests, and must remain within the corresponding capacity always bound, which prevents any AMR 
from being assigned more work than it can physically carry.  Constraint (14) formalizes the 
ruleâ€‘selection layer. At each decision epoch, exactly one scheduling rule from the predefined rule set 
is activated. This structure allows the reinforcementâ€‘learningâ€‘based scheduler to operate on a discrete 
portfolio of dispa tching and charging rules, rather than directly manipulating lowâ€‘level routing 
decisions. Constraints (15) assume that if both AMR a and b pass through node k, one must go first 
and the other must go later. Constraints (16) confirm that if AMR a at node k first and both pass through 
k, then AMR bâ€™s start time must be later than aâ€™s departure time plus the safety margin. Constraints 
(17) define the domains of the binary decision variables by restricting routing, charging-on/off, 
taskâ€‘acceptance, and ruleâ€‘selection variables to {0,1}. This ensures a consistent mixedâ€‘integer 
programming formulation for the overall partialâ€‘charging, dynamicâ€‘task AMR scheduling problem.  
Constraints (18) specify the domains of the continuous variables, imposing nonâ€‘negativity (and, where 
appropriate, upper bounds) on all time, load, waiting, chargingâ€‘amount , and batteryâ€‘level variables. 
These bounds guarantee that the continuous states rem ain physically meaningful and numerically 
stable during optimization.  